{% extends 'base.html' %}

{% block content %}
<h3>تقرير الحضور (SQL) - {{ selected_date }}</h3>

<!-- نموذج اختيار التاريخ -->
<form method="get" class="mb-3">
    <label for="date">اختر التاريخ:</label>
    <input type="date" id="date" name="date" value="{{ selected_date }}">
    <button type="submit" class="btn btn-primary btn-sm">عرض</button>
</form>

<!-- خلاصة عدد الموظفين -->
<p>عدد الموظفين في التقرير: <strong>{{ records|length }}</strong></p>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>كود الموظف</th>
            <th>الاسم</th>
            <th>الشركة</th>
            <th>الإدارة</th>
            <th>الوظيفة</th>
            <th>نوع الدوام</th>
            <th>تسجيل الدخول</th>
            <th>تسجيل الخروج</th>
        </tr>
    </thead>
    <tbody>
        {% for rec in records %}
        <tr>
            <td>{{ rec.employee_code }}</td>
            <td>{{ rec.name or '-' }}</td>
            <td>{{ rec.company_name or '-' }}</td>
            <td>{{ rec.department or '-' }}</td>
            <td>{{ rec.job_title or '-' }}</td>
            <td>{{ rec.work_type or '-' }}</td>
            <td>{{ rec.check_in or '-' }}</td>
            <td>{{ rec.check_out or '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
